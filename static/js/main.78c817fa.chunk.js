(this.webpackJsonpbubbles=this.webpackJsonpbubbles||[]).push([[0],{115:function(e,t,n){},116:function(e,t,n){},130:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){},149:function(e,t,n){},150:function(e,t,n){},151:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){},262:function(e,t,n){},263:function(e,t,n){},264:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(69),c=n.n(s),r=(n(115),n(4)),i=n(26),l=n(6),u=(n(116),n(2));var d=function(e){var t=e.themeColor,n=t+e.themeTransparency;return Object(u.jsxs)("div",{className:"Bubbles",style:{backgroundImage:"linear-gradient(to bottom right, ".concat(n,", ").concat(t,")")},children:[Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"})]})},b=n(23),j=n.n(b),m=n(41),h=n(15),p=n.n(h),O=(n(130),n(42)),f=n(43),v=n(16),g=n(47),y=n(45),x={userName:"solace-cloud-client",password:"m3mpet3g503rr1df5ole2rcgff",invocationContext:{host:"mr1n34cqfh5s9n.messaging.solace.cloud",port:8443,clientId:""},timeout:3,keepAliveInterval:60,cleanSession:!0,useSSL:!0,reconnect:!0},N=n(14),S=n.n(N),k=new(function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;return Object(O.a)(this,n),(e=t.call(this,x.invocationContext.host,Number(x.invocationContext.port),x.invocationContext.clientId)).onMessageArrived=e.handleMessage.bind(Object(v.a)(e)),e.callbacks=[],e}return Object(f.a)(n,[{key:"connectWithPromise",value:function(){var e=this;return new Promise((function(t,n){x.onSuccess=t,x.onFailure=n,e.connect(x)}))}},{key:"onConnectionLost",value:function(e){0!==e.errorCode&&console.log("Connection lost with Solace Cloud")}},{key:"register",value:function(e){this.callbacks.push(e)}},{key:"handleMessage",value:function(e){console.log("Received message",e.payloadString),this.callbacks.forEach((function(t){return t(e)}))}}]),n}(S.a.Client));p.a.setAppElement("#modal-portal");var C={overlay:{backgroundColor:"none"},content:{width:"15%",minWidth:"200px",borderRadius:"10px",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",zIndex:"1000",color:"rgba(0, 0, 0, 0.5)"}};var V=function(e){var t=e.isOpen,n=e.closeModal,o=e.contentLabel,s=Object(a.useState)(""),c=Object(r.a)(s,2),i=c[0],d=c[1],b=Object(a.useState)(""),h=Object(r.a)(b,2),O=h[0],f=h[1],v=Object(a.useState)(!1),g=Object(r.a)(v,2),y=g[0],x=g[1],N=Object(a.useState)(!1),S=Object(r.a)(N,2),V=S[0],w=S[1],P=Object(a.useState)(!1),T=Object(r.a)(P,2),R=T[0],L=T[1];if(R)return Object(u.jsx)(l.a,{to:{pathname:"/room",state:{roomcode:O,nickname:i}}});var B=function(){var e=Object(m.a)(j.a.mark((function e(t){var n,a,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),x(!0),""===i){e.next=22;break}return e.prev=3,e.next=6,fetch("".concat("https://bubbles-app-backend.herokuapp.com","/createroom"),{method:"POST"}).then((function(e){return e.json()}));case 6:return n=e.sent,a=n.message,o={roomcode:a,username:i},f(a),console.log(o),e.next=13,fetch("".concat("https://bubbles-app-backend.herokuapp.com","/joinroom"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});case 13:200===e.sent.status?k.connectWithPromise().then((function(e){console.log("Succesfully connected to Solace Cloud.",e),k.subscribe(a),L(!0)})).catch((function(e){console.log("Unable to establish connection with Solace Cloud, see above logs for more details.",e),w(!0)})):(w(!0),I()),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(3),console.log(e.t0),w(!0),I();case 22:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){d(""),x(!1)};return Object(u.jsxs)(p.a,{isOpen:t,onRequestClose:function(){I(),w(!1),n()},style:C,contentLabel:o,children:[Object(u.jsx)("p",{className:"modal-header",children:"nickname"}),Object(u.jsxs)("form",{className:"modal-form",onSubmit:B,children:[Object(u.jsx)("input",{className:"modal-name-input",type:"text",value:i,onChange:function(e){return d(e.target.value)},maxLength:15,disabled:y,style:{cursor:y?"not-allowed":"auto"}}),Object(u.jsx)("button",{className:"modal-submit-button",disabled:""===i||y,children:"join"})]}),Object(u.jsx)("p",{style:{marginBottom:0,color:"#f44",display:V?"block":"none"},children:"Our servers are having some issues at the moment..."})]})};n(136);p.a.setAppElement("#modal-portal");var w={overlay:{backgroundColor:"none"},content:{width:"15%",minWidth:"200px",borderRadius:"10px",padding:"30px",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",zIndex:"1000",color:"rgba(0, 0, 0, 0.5)"}};var P=function(e){var t=e.isOpen,n=e.closeModal,o=e.contentLabel,s=Object(a.useState)(""),c=Object(r.a)(s,2),i=c[0],d=c[1],b=Object(a.useState)(""),h=Object(r.a)(b,2),O=h[0],f=h[1],v=Object(a.useState)(!1),g=Object(r.a)(v,2),y=g[0],x=g[1],N=Object(a.useState)(!1),S=Object(r.a)(N,2),C=S[0],V=S[1],P=Object(a.useState)(!1),T=Object(r.a)(P,2),R=T[0],L=T[1];if(R)return Object(u.jsx)(l.a,{to:{pathname:"/room",state:{roomcode:i,nickname:O}}});var B=function(){var e=Object(m.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),x(!0),e.prev=2,n={roomcode:i,username:O},e.next=6,fetch("".concat("https://bubbles-app-backend.herokuapp.com","/joinroom"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 6:200===e.sent.status?k.connectWithPromise().then((function(e){console.log("Succesfully connected to Solace Cloud.",e),k.subscribe(i),L(!0)})).catch((function(e){console.log("Unable to establish connection with Solace Cloud, see above logs for more details.",e)})):(V(!0),I()),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),V(!0),I();case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){d(""),f(""),x(!1)};return Object(u.jsxs)(p.a,{isOpen:t,onRequestClose:function(){I(),V(!1),n()},style:w,contentLabel:o,children:[Object(u.jsxs)("form",{className:"modal-join-form",onSubmit:B,children:[Object(u.jsx)("p",{className:"modal-join-header",children:"bubble code"}),Object(u.jsx)("input",{className:"modal-join-code-input",type:"text",value:i,onChange:function(e){return d(e.target.value)},disabled:y,style:{cursor:y?"not-allowed":"auto"}}),Object(u.jsx)("p",{className:"modal-join-header",children:"nickname"}),Object(u.jsx)("input",{className:"modal-join-name-input",type:"text",value:O,onChange:function(e){return f(e.target.value)},maxLength:15,disabled:y,style:{cursor:y?"not-allowed":"auto"}}),Object(u.jsx)("button",{className:"modal-join-submit-button",disabled:""===O||""===i||y,children:"join"})]}),Object(u.jsx)("p",{style:{marginBottom:0,color:"#f44",display:!C||y?"none":"block"},children:"Please enter a valid room code."})]})},T=n.p+"static/media/logo.cead2453.svg";n(137);var R=function(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],o=t[1],s=Object(a.useState)(!1),c=Object(r.a)(s,2),i=c[0],l=c[1];return Object(a.useEffect)((function(){try{k.disconnect()}catch(e){console.log(e)}}),[]),Object(u.jsxs)("div",{className:"MainMenu",children:[Object(u.jsxs)("div",{style:{display:n||i?"none":"block"},children:[Object(u.jsxs)("div",{className:"logo-section",children:[Object(u.jsx)("h1",{className:"logo-text",children:"bubbles"}),Object(u.jsx)("img",{className:"logo-pic",src:T,alt:"logo"})]}),Object(u.jsxs)("div",{className:"menu-buttons",children:[Object(u.jsx)("p",{className:"menu-button",onClick:function(){return l(!0)},children:"start a bubble"}),Object(u.jsx)("p",{className:"menu-button",onClick:function(){return o(!0)},children:"join a bubble"})]})]}),Object(u.jsx)(V,{isOpen:i,closeModal:function(){return l(!1)},contentLabel:"Create A Bubble"}),Object(u.jsx)(P,{isOpen:n,closeModal:function(){return o(!1)},contentLabel:"Join A Bubble"})]})},L=n(103),B=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(O.a)(this,n),(a=t.call(this,e)).playNewVideo=a.playNewVideo.bind(Object(v.a)(a)),a.playVideo=a.playVideo.bind(Object(v.a)(a)),a.pauseVideo=a.pauseVideo.bind(Object(v.a)(a)),a.onPlayerReady=a.onPlayerReady.bind(Object(v.a)(a)),a.videoId="",a.state={player:null,videoOptions:{height:"100%",width:"100%"}},a}return Object(f.a)(n,[{key:"handleMessage",value:function(e){var t=JSON.parse(e.payloadString);console.log("Handle message here!"),"playPressed"===t.messageType&&this.playVideo(),"pausePressed"===t.messageType&&this.pauseVideo()}},{key:"playNewVideo",value:function(e){this.videoId=e,this.state.player.loadVideoById(this.videoId,0)}},{key:"playVideo",value:function(){console.log(this.state),this.state.player.playVideo()}},{key:"pauseVideo",value:function(){this.state.player.pauseVideo()}},{key:"onPlayerReady",value:function(e){console.log("Player is ready: ",e),this.state.player=e.target,k.register(this.handleMessage.bind(this))}},{key:"onVideoPlay",value:function(e){console.log("Video played at: ",e.target.getCurrentTime());var t=new S.a.Message(JSON.stringify({messageType:"playPressed",message:"Play press detected"}));t.destinationName=this.props.roomcode,k.send(t)}},{key:"onVideoPause",value:function(e){console.log("Video paused at: ",e);var t=new S.a.Message(JSON.stringify({messageType:"pausePressed",message:"Pause press detected"}));t.destinationName=this.props.roomcode,k.send(t)}},{key:"onVideoPlaybackRateChange",value:function(e){console.log("Video playback rate changed: ",e)}},{key:"onVideoStateChange",value:function(e){console.log("Video state changed: ",e),console.log("state: ",this.state)}},{key:"onVideoEnd",value:function(){console.log("Video ended")}},{key:"onVideoError",value:function(e){console.log("Video error: ",e)}},{key:"render",value:function(){return Object(u.jsx)(L.a,{videoId:this.videoId,className:"Video",opts:this.state.videoOptions,onReady:this.onPlayerReady.bind(this),onPlay:this.onVideoPlay.bind(this),onPause:this.onVideoPause.bind(this),onPlaybackRateChange:this.onVideoPlaybackRateChange.bind(this),onStateChange:this.onVideoStateChange.bind(this),onEnd:this.onVideoEnd.bind(this)})}}]),n}(a.Component),I=n(46);n(149);p.a.setAppElement("#modal-portal");var M={overlay:{backgroundColor:"none"},content:{borderRadius:"10px",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",zIndex:"1000",color:"rgba(0, 0, 0, 0.5)"}};var J=function(e){var t=e.isOpen,n=e.closeModal,o=e.contentLabel,s=e.queueVideo,c=e.roomcode;Object(a.useEffect)((function(){k.register(r)}),[]);var r=function(e){try{var t=JSON.parse(e.payloadString);if("newVideoURL"===t.messageType){var n=new URL(t.url);s(n.searchParams.get("v"))}}catch(a){console.log(a)}};return Object(u.jsxs)(p.a,{isOpen:t,onRequestClose:n,style:M,contentLabel:o,children:[Object(u.jsx)("p",{className:"modal-play-header",children:"youtube video url"}),Object(u.jsxs)("form",{className:"modal-play-form",onSubmit:function(e){e.preventDefault();try{var t=new URL(document.getElementById("youtube-link-input").value);s(t.searchParams.get("v"));var a=new S.a.Message(JSON.stringify({messageType:"newVideoURL",url:t}));a.destinationName=c,k.send(a)}catch(o){console.log(o)}n()},children:[Object(u.jsx)("input",{id:"youtube-link-input",className:"modal-play-input",type:"text"}),Object(u.jsx)("button",{className:"modal-play-submit-button",children:"play"})]})]})};var E=function(e){var t=e.label,n=e.className,a=e.onClick;return Object(u.jsx)("p",{className:n,onClick:a,children:t})};n(150);var A=function(e){var t=e.list,n=Object(a.useState)(!0),o=Object(r.a)(n,2),s=o[0],c=o[1];return Object(u.jsxs)("div",{className:"SideBarList",children:[Object(u.jsx)(E,{className:"SideBarList-Toggle",label:"members",onClick:function(){return c(!s)}}),Object(u.jsx)("div",{style:{display:s?"block":"none"},className:"SideBarList-Items",children:t.map((function(e,t){return Object(u.jsx)("p",{children:e},t)}))})]})};n(151);var q=function(e){var t=e.roomcode,n=e.username,o=Object(a.useState)(""),s=Object(r.a)(o,2),c=s[0],i=s[1],l=Object(a.useState)([]),d=Object(r.a)(l,2),b=d[0],j=d[1],m=Object(a.useRef)();Object(a.useEffect)((function(){k.register(h)}),[]);var h=function(e){try{var t=JSON.parse(e.payloadString);if("newTextMessage"===t.messageType){var n={username:t.username,text:t.text};j((function(e){return[].concat(Object(I.a)(e),[n])}))}}catch(a){console.log(a)}p()},p=function(){m.current.scrollIntoView({behavior:"smooth"})};return Object(u.jsxs)("div",{className:"SideBarChat",children:[Object(u.jsxs)("div",{className:"SideBarChat-Items",children:[b.map((function(e,t){var n=e.username,a=e.text;return Object(u.jsxs)("p",{className:"SideBarChat-Item",children:[n,": ",a]},t)})),Object(u.jsx)("div",{ref:m,className:"SideBarChat-anchor"})]}),Object(u.jsx)("form",{className:"SideBarChat-Form",onSubmit:function(e){if(e.preventDefault(),""!==c){var a=new S.a.Message(JSON.stringify({messageType:"newTextMessage",username:n,text:c}));a.destinationName=t,k.send(a),i("")}},children:Object(u.jsx)("input",{type:"text",value:c,onChange:function(e){return i(e.target.value)}})})]})},U=n(28),W=n(29);n(154);var D=function(e){var t=e.roomcode,n=e.username,o=e.queueVideo,s=Object(a.useState)(!1),c=Object(r.a)(s,2),i=c[0],l=c[1],d=Object(a.useState)([]),b=Object(r.a)(d,2),j=b[0],m=b[1];Object(a.useEffect)((function(){k.register(h),fetch("".concat("https://bubbles-app-backend.herokuapp.com","/getUsers"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomcode:t})}).then((function(e){return e.json()})).then((function(e){return m(e.users)})).catch((function(e){return console.log(e)}))}),[]);var h=function(e){try{var t=JSON.parse(e.payloadString);"userJoined"===t.messageType&&m((function(e){return[].concat(Object(I.a)(e),[t.username])}))}catch(n){console.log(n)}};return Object(u.jsxs)("div",{className:"SideBar",children:[Object(u.jsxs)("div",{className:"SideBar-Top",children:[Object(u.jsx)(E,{label:t,className:"RoomCodeLabel"}),Object(u.jsx)(A,{list:j,roomcode:t}),Object(u.jsx)(q,{roomcode:t,username:n})]}),Object(u.jsxs)("div",{className:"SideBar-Buttons",children:[Object(u.jsxs)("button",{className:"play-button",onClick:function(){return l(!0)},children:[Object(u.jsx)(U.a,{icon:W.c,style:{marginRight:"10px"}}),"play"]}),Object(u.jsxs)("button",{className:"exit-button",children:[Object(u.jsx)(U.a,{icon:W.a,style:{marginRight:"10px"}}),"exit"]})]}),Object(u.jsx)(J,{isOpen:i,closeModal:function(){return l(!1)},contentLabel:"Play Video",queueVideo:o,roomcode:t})]})};n(155);var z=function(e){if(!e.location.state)return Object(u.jsx)(l.a,{to:"/"});var t=e.location.state,n=t.roomcode,a=t.nickname,o=new B({roomcode:n});return Object(u.jsxs)("div",{className:"RoomScreen",children:[Object(u.jsx)(D,{roomcode:n,queueVideo:o.playNewVideo,username:a}),Object(u.jsx)("div",{className:"VideoSection",children:o.render()})]})},F=n(110);n(262);var H=function(e){var t=e.themeColor,n=e.setThemeColor,o=Object(a.useState)(!1),s=Object(r.a)(o,2),c=s[0],i=s[1],l=Object(a.useState)(t),d=Object(r.a)(l,2),b=d[0],j=d[1];return Object(u.jsxs)("div",{className:"ThemeChanger",children:[Object(u.jsx)(U.a,{icon:W.b,className:"ThemeChanger-Icon",onClick:function(){return i(!c)}}),c?Object(u.jsxs)("div",{className:"ThemeChanger-Popover",children:[Object(u.jsx)("div",{className:"ThemeChanger-Cover",onClick:function(){return i(!1)}}),Object(u.jsx)(F.a,{className:"ThemeChanger-ColorPicker",onChange:function(e){var t=e.hex;j(t),n(t)},color:b,disableAlpha:!0})]}):null]})};n(263);var G=function(){var e=Object(a.useState)("#413c77"),t=Object(r.a)(e,2),n=t[0],o=t[1],s=Object(a.useState)("77"),c=Object(r.a)(s,2),b=c[0];return c[1],Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(d,{themeColor:n,themeTransparency:b}),Object(u.jsx)(H,{themeColor:n,setThemeColor:o}),Object(u.jsx)(i.a,{basename:"/",children:Object(u.jsxs)(l.d,{children:[Object(u.jsx)(l.b,{path:"/",exact:!0,component:R}),Object(u.jsx)(l.b,{path:"/room",exact:!0,component:z})]})})]})};c.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(G,{})}),document.getElementById("root"))}},[[264,1,2]]]);
//# sourceMappingURL=main.78c817fa.chunk.js.map