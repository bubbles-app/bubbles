(this.webpackJsonpbubbles=this.webpackJsonpbubbles||[]).push([[0],{144:function(e,t,a){},145:function(e,t,a){},159:function(e,t,a){},194:function(e,t,a){},195:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){},209:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){},320:function(e,t,a){},321:function(e,t,a){},322:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(79),s=a.n(c),r=(a(144),a(4)),i=a(33),l=a(6),u=(a(145),a(2));var d=function(e){var t=e.themeColor,a=t+e.themeTransparency;return Object(u.jsxs)("div",{className:"Bubbles",style:{backgroundImage:"linear-gradient(to bottom right, ".concat(a,", ").concat(t,")")},children:[Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"})]})},b=a(28),j=a.n(b),m=a(48),h=a(19),p=a.n(h),O=(a(159),a(126)),v=Object(O.io)("https://bubbles-app-backend.herokuapp.com");p.a.setAppElement("#modal-portal");var f={overlay:{backgroundColor:"none"},content:{width:"15%",minWidth:"200px",borderRadius:"10px",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",zIndex:"1000",color:"rgba(0, 0, 0, 0.5)"}};var x=function(e){var t=e.isOpen,a=e.closeModal,o=e.contentLabel,c=Object(n.useState)(""),s=Object(r.a)(c,2),i=s[0],d=s[1],b=Object(n.useState)(""),h=Object(r.a)(b,2),O=h[0],x=h[1],y=Object(n.useState)(!1),g=Object(r.a)(y,2),N=g[0],C=g[1],k=Object(n.useState)(!1),S=Object(r.a)(k,2),V=S[0],w=S[1],T=Object(n.useState)(!1),R=Object(r.a)(T,2),I=R[0],B=R[1];if(I)return Object(u.jsx)(l.a,{to:{pathname:"/room",state:{roomcode:O,nickname:i}}});var P=function(){var e=Object(m.a)(j.a.mark((function e(t){var a,n,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==i){e.next=3;break}return e.abrupt("return");case 3:return C(!0),e.prev=4,e.next=7,fetch("".concat("https://bubbles-app-backend.herokuapp.com","/createroom"),{method:"POST"}).then((function(e){return e.json()}));case 7:return a=e.sent,n=a.message,o={roomCode:n,username:i,socketId:v.id},x(n),e.next=13,fetch("".concat("https://bubbles-app-backend.herokuapp.com","/joinroom"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});case 13:if(200===e.sent.status){e.next=18;break}return w(!0),L(),e.abrupt("return");case 18:B(!0),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(4),console.log(e.t0),w(!0),L();case 26:case"end":return e.stop()}}),e,null,[[4,21]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){d(""),C(!1)};return Object(u.jsxs)(p.a,{isOpen:t,onRequestClose:function(){L(),w(!1),a()},style:f,contentLabel:o,children:[Object(u.jsx)("p",{className:"modal-header",children:"nickname"}),Object(u.jsxs)("form",{className:"modal-form",onSubmit:P,children:[Object(u.jsx)("input",{className:"modal-name-input",type:"text",value:i,onChange:function(e){return d(e.target.value)},maxLength:15,disabled:N,style:{cursor:N?"not-allowed":"auto"}}),Object(u.jsx)("button",{className:"modal-submit-button",disabled:""===i||N,children:"join"})]}),Object(u.jsx)("p",{style:{marginBottom:0,color:"#f44",display:V?"block":"none"},children:"Our servers are having some issues at the moment..."})]})};a(194);p.a.setAppElement("#modal-portal");var y={overlay:{backgroundColor:"none"},content:{width:"15%",minWidth:"200px",borderRadius:"10px",padding:"30px",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",zIndex:"1000",color:"rgba(0, 0, 0, 0.5)"}};var g=function(e){var t=e.isOpen,a=e.closeModal,o=e.contentLabel,c=Object(n.useState)(""),s=Object(r.a)(c,2),i=s[0],d=s[1],b=Object(n.useState)(""),h=Object(r.a)(b,2),O=h[0],f=h[1],x=Object(n.useState)(!1),g=Object(r.a)(x,2),N=g[0],C=g[1],k=Object(n.useState)(!1),S=Object(r.a)(k,2),V=S[0],w=S[1],T=Object(n.useState)(!1),R=Object(r.a)(T,2),I=R[0],B=R[1];if(I)return Object(u.jsx)(l.a,{to:{pathname:"/room",state:{roomcode:i,nickname:O}}});var P=function(){var e=Object(m.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),C(!0),e.prev=2,a={roomCode:i,username:O,socketId:v.id},e.next=6,fetch("".concat("https://bubbles-app-backend.herokuapp.com","/joinroom"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 6:200===e.sent.status?B(!0):(w(!0),L()),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),w(!0),L();case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){d(""),f(""),C(!1)};return Object(u.jsxs)(p.a,{isOpen:t,onRequestClose:function(){L(),w(!1),a()},style:y,contentLabel:o,children:[Object(u.jsxs)("form",{className:"modal-join-form",onSubmit:P,children:[Object(u.jsx)("p",{className:"modal-join-header",children:"bubble code"}),Object(u.jsx)("input",{className:"modal-join-code-input",type:"text",value:i,onChange:function(e){return d(e.target.value)},disabled:N,style:{cursor:N?"not-allowed":"auto"}}),Object(u.jsx)("p",{className:"modal-join-header",children:"nickname"}),Object(u.jsx)("input",{className:"modal-join-name-input",type:"text",value:O,onChange:function(e){return f(e.target.value)},maxLength:15,disabled:N,style:{cursor:N?"not-allowed":"auto"}}),Object(u.jsx)("button",{className:"modal-join-submit-button",disabled:""===O||""===i||N,children:"join"})]}),Object(u.jsx)("p",{style:{marginBottom:0,color:"#f44",display:!V||N?"none":"block"},children:"Please enter a valid room code."})]})},N=a.p+"static/media/logo.cead2453.svg";a(195);var C=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(!1),s=Object(r.a)(c,2),i=s[0],l=s[1];return Object(u.jsxs)("div",{className:"MainMenu",children:[Object(u.jsxs)("div",{style:{display:a||i?"none":"block"},children:[Object(u.jsxs)("div",{className:"logo-section",children:[Object(u.jsx)("h1",{className:"logo-text",children:"bubbles"}),Object(u.jsx)("img",{className:"logo-pic",src:N,alt:"logo"})]}),Object(u.jsxs)("div",{className:"menu-buttons",children:[Object(u.jsx)("p",{className:"menu-button",onClick:function(){return l(!0)},children:"start a bubble"}),Object(u.jsx)("p",{className:"menu-button",onClick:function(){return o(!0)},children:"join a bubble"})]})]}),Object(u.jsx)(x,{isOpen:i,closeModal:function(){return l(!1)},contentLabel:"Create A Bubble"}),Object(u.jsx)(g,{isOpen:a,closeModal:function(){return o(!1)},contentLabel:"Join A Bubble"})]})},k=a(128),S=a(129),V=a(20),w=a(139),T=a(138),R=a(130),I=function(e){Object(w.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(k.a)(this,a),(n=t.call(this,e)).playNewVideo=n.playNewVideo.bind(Object(V.a)(n)),n.playVideo=n.playVideo.bind(Object(V.a)(n)),n.pauseVideo=n.pauseVideo.bind(Object(V.a)(n)),n.onPlayerReady=n.onPlayerReady.bind(Object(V.a)(n)),n.getStateName=n.getStateName.bind(Object(V.a)(n)),n.videoId="",n.state={player:null,videoOptions:{height:"100%",width:"100%"}},n}return Object(S.a)(a,[{key:"playNewVideo",value:function(e){this.videoId=e,this.state.player&&this.state.player.loadVideoById(this.videoId,0)}},{key:"playVideo",value:function(e){this.state.player.playVideo()}},{key:"pauseVideo",value:function(e){this.state.player.pauseVideo()}},{key:"onPlayerReady",value:function(e){var t=this;this.state.player=e.target,""!==this.videoId&&this.playNewVideo(this.videoId),v.on("videoStateChange",(function(e){var a=e.eventCode,n=e.videoTime;console.log("INCOMING");var o=t.getStateName(a),c=n,s=t.state.player.getCurrentTime();"playing"===o&&t.playVideo(),"paused"===o&&t.pauseVideo(),Math.abs(s-c)>1&&t.state.player.seekTo(c)}))}},{key:"onVideoPlaybackRateChange",value:function(e){}},{key:"onVideoStateChange",value:function(e){var t=e.data,a=e.target.getCurrentTime();console.log("Video state ".concat(this.getStateName(t)," at: "),a);var n=this.props.roomcode;v.emit("videoStateChange",{roomCode:n,eventCode:t,videoTime:a})}},{key:"onVideoEnd",value:function(e){console.log("Video ended")}},{key:"onVideoError",value:function(e){console.log("Video error: ",e)}},{key:"getStateName",value:function(e){switch(e){case-1:return"unstarted";case 0:return"ended";case 1:return"playing";case 2:return"paused";case 3:return"buffering";case 5:return"video cued";default:return"invalid code"}}},{key:"render",value:function(){return Object(u.jsx)(R.a,{videoId:this.videoId,className:"Video",opts:this.state.videoOptions,onReady:this.onPlayerReady.bind(this),onPlaybackRateChange:this.onVideoPlaybackRateChange.bind(this),onStateChange:this.onVideoStateChange.bind(this),onEnd:this.onVideoEnd.bind(this)})}}]),a}(n.Component),B=a(53),P=a(49);a(207);p.a.setAppElement("#modal-portal");var L={overlay:{backgroundColor:"none"},content:{width:"15%",minWidth:"200px",borderRadius:"10px",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",zIndex:"1000",color:"rgba(0, 0, 0, 0.5)"}};var M=function(e){var t=e.isOpen,a=e.closeModal,o=e.contentLabel,c=e.queueVideo,s=e.roomcode;Object(n.useEffect)((function(){v.on("newVideoUrl",r)}),[]);var r=function(e){try{var t=new URL(e);c(t.searchParams.get("v"))}catch(a){console.log(a)}};return Object(u.jsxs)(p.a,{isOpen:t,onRequestClose:a,style:L,contentLabel:o,children:[Object(u.jsx)("p",{className:"modal-play-header",children:"youtube video url"}),Object(u.jsxs)("form",{className:"modal-play-form",onSubmit:function(e){e.preventDefault();try{var t=document.getElementById("youtube-link-input").value,n=new URL(t);c(n.searchParams.get("v")),v.emit("newVideoUrl",{roomCode:s,urlString:t});var o={roomcode:s,url:t};fetch("".concat("https://bubbles-app-backend.herokuapp.com","/setcurrentvideo"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).catch((function(e){return console.log(e)}))}catch(r){console.log(r)}a()},children:[Object(u.jsx)("input",{id:"youtube-link-input",className:"modal-play-input",type:"text",autoComplete:"off"}),Object(u.jsx)("button",{className:"modal-play-submit-button",children:"play"})]})]})};var E=function(e){var t=e.label,a=e.className,n=e.onClick;return Object(u.jsx)("p",{className:a,onClick:n,children:t})};a(208);var q=function(e){var t=e.list,a=Object(n.useState)(!0),o=Object(r.a)(a,2),c=o[0],s=o[1];return Object(u.jsxs)("div",{className:"SideBarList",children:[Object(u.jsx)(E,{className:"SideBarList-Toggle",label:"members",onClick:function(){return s(!c)}}),Object(u.jsx)("div",{style:{display:c?"block":"none"},className:"SideBarList-Items",children:t.map((function(e,t){return Object(u.jsx)("p",{children:e},t)}))})]})};a(209);var J=function(e){var t=e.roomcode,a=e.username,o=Object(n.useState)(""),c=Object(r.a)(o,2),s=c[0],i=c[1],l=Object(n.useState)([]),d=Object(r.a)(l,2),b=d[0],j=d[1],m=Object(n.useRef)();Object(n.useEffect)((function(){v.on("newTextMessage",h)}),[]);var h=function(e){var t={username:e.username,text:e.text};j((function(e){return[].concat(Object(B.a)(e),[t])})),p()},p=function(){m.current.scrollIntoView({behavior:"smooth"})};return Object(u.jsxs)("div",{className:"SideBarChat",children:[Object(u.jsxs)("div",{className:"SideBarChat-Items",children:[b.map((function(e,t){var a=e.username,n=e.text;return Object(u.jsxs)("p",{className:"SideBarChat-Item",children:[a,": ",n]},t)})),Object(u.jsx)("div",{ref:m,className:"SideBarChat-anchor"})]}),Object(u.jsx)("form",{className:"SideBarChat-Form",onSubmit:function(e){if(e.preventDefault(),""!==s){var n={username:a,text:s};v.emit("newTextMessage",{roomCode:t,messageInfo:n}),i("")}},children:Object(u.jsx)("input",{type:"text",value:s,onChange:function(e){return i(e.target.value)}})})]})},A=a(50),U=a(51);a(212);var D=function(e){var t=e.roomcode,a=e.username,o=e.queueVideo,c=Object(n.useState)(!1),s=Object(r.a)(c,2),i=s[0],l=s[1],d=Object(n.useState)([]),b=Object(r.a)(d,2),j=b[0],m=b[1],h=Object(P.useMediaQuery)({query:"(max-device-width: 700px)"});Object(n.useEffect)((function(){v.on("newUserJoinedRoom",p),fetch("".concat("https://bubbles-app-backend.herokuapp.com","/getUsers"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomcode:t})}).then((function(e){return e.json()})).then((function(e){return m(e.users)})).catch((function(e){return console.log(e)})),fetch("".concat("https://bubbles-app-backend.herokuapp.com","/getcurrentvideo"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomcode:t})}).then((function(e){return e.json()})).then((function(e){var t=e.url,a=new URL(t).searchParams.get("v");o(a)})).catch((function(e){return console.log(e)}))}),[]);var p=function(e){m((function(t){return[].concat(Object(B.a)(t),[e])}))},O={};h&&(O={width:"100%",margin:"0",marginTop:"10px"});var f=Object(u.jsx)("div",{className:"SideBar-Buttons",children:Object(u.jsxs)("button",{className:"play-button",onClick:function(){return l(!0)},children:[Object(u.jsx)(A.a,{icon:U.b,style:{marginRight:"10px"}}),"play"]})});return Object(u.jsxs)("div",{className:"SideBar",style:O,children:[h?Object(u.jsxs)(u.Fragment,{children:[f,Object(u.jsxs)("div",{className:"SideBar-Top",children:[Object(u.jsx)(E,{label:t,className:"RoomCodeLabel"}),Object(u.jsx)(J,{roomcode:t,username:a})]})]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"SideBar-Top",children:[Object(u.jsx)(E,{label:t,className:"RoomCodeLabel"}),Object(u.jsx)(q,{list:j,roomcode:t}),Object(u.jsx)(J,{roomcode:t,username:a})]}),f]}),Object(u.jsx)(M,{isOpen:i,closeModal:function(){return l(!1)},contentLabel:"Play Video",queueVideo:o,roomcode:t})]})};a(213);var z=function(e){var t=Object(P.useMediaQuery)({query:"(max-device-width: 700px)"});if(!e.location.state)return Object(u.jsx)(l.a,{to:"/"});var a=e.location.state,n=a.roomcode,o=a.nickname,c={},s={margin:"20px"};t&&(c={flexDirection:"column-reverse",justifyContent:"flex-end"},s={margin:"0px",height:"40vh"});var r=new I({roomcode:n});return Object(u.jsxs)("div",{className:"RoomScreen",style:c,children:[Object(u.jsx)(D,{roomcode:n,queueVideo:r.playNewVideo,username:o}),Object(u.jsx)("div",{className:"VideoSection",style:s,children:r.render()})]})},F=a(137);a(320);var W=function(e){var t=e.themeColor,a=e.setThemeColor,o=Object(n.useState)(!1),c=Object(r.a)(o,2),s=c[0],i=c[1],l=Object(n.useState)(t),d=Object(r.a)(l,2),b=d[0],j=d[1];return Object(u.jsxs)("div",{className:"ThemeChanger",children:[Object(u.jsx)(A.a,{icon:U.a,className:"ThemeChanger-Icon",onClick:function(){return i(!s)}}),s?Object(u.jsxs)("div",{className:"ThemeChanger-Popover",children:[Object(u.jsx)("div",{className:"ThemeChanger-Cover",onClick:function(){return i(!1)}}),Object(u.jsx)(F.a,{className:"ThemeChanger-ColorPicker",onChange:function(e){var t=e.hex;j(t),a(t)},color:b,disableAlpha:!0})]}):null]})};a(321);var Q=function(){var e=Object(n.useState)("#413c77"),t=Object(r.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)("77"),s=Object(r.a)(c,2),b=s[0];return s[1],Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(d,{themeColor:a,themeTransparency:b}),Object(u.jsx)(W,{themeColor:a,setThemeColor:o}),Object(u.jsx)(i.a,{basename:"/",children:Object(u.jsxs)(l.d,{children:[Object(u.jsx)(l.b,{path:"/",exact:!0,component:C}),Object(u.jsx)(l.b,{path:"/room",exact:!0,component:z})]})})]})};s.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(Q,{})}),document.getElementById("root"))}},[[322,1,2]]]);
//# sourceMappingURL=main.3e667777.chunk.js.map