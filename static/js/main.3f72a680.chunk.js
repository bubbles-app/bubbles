(this.webpackJsonpbubbles=this.webpackJsonpbubbles||[]).push([[0],{115:function(e,t,a){},116:function(e,t,a){},130:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){},262:function(e,t,a){},263:function(e,t,a){},264:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(69),c=a.n(s),r=(a(115),a(4)),i=a(26),l=a(6),u=(a(116),a(2));var d=function(e){var t=e.themeColor,a=t+e.themeTransparency;return Object(u.jsxs)("div",{className:"Bubbles",style:{backgroundImage:"linear-gradient(to bottom right, ".concat(a,", ").concat(t,")")},children:[Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"}),Object(u.jsx)("div",{className:"bubble"})]})},b=a(23),m=a.n(b),j=a(39),h=a(16),p=a.n(h),O=(a(130),a(40)),v=a(41),f=a(14),g=a(47),y=a(45),x={userName:"solace-cloud-client",password:"m3mpet3g503rr1df5ole2rcgff",invocationContext:{host:"mr1n34cqfh5s9n.messaging.solace.cloud",port:8443,clientId:""},timeout:3,keepAliveInterval:60,cleanSession:!0,useSSL:!0,reconnect:!0},N=a(13),S=a.n(N),C=new(function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){var e;return Object(O.a)(this,a),(e=t.call(this,x.invocationContext.host,Number(x.invocationContext.port),x.invocationContext.clientId)).onMessageArrived=e.handleMessage.bind(Object(f.a)(e)),e.callbacks=[],e}return Object(v.a)(a,[{key:"connectWithPromise",value:function(){var e=this;return new Promise((function(t,a){x.onSuccess=t,x.onFailure=a,e.connect(x)}))}},{key:"onConnectionLost",value:function(e){0!==e.errorCode&&console.log("Connection lost with Solace Cloud")}},{key:"register",value:function(e){this.callbacks.push(e)}},{key:"handleMessage",value:function(e){console.log("Received message",e.payloadString),this.callbacks.forEach((function(t){return t(e)}))}}]),a}(S.a.Client));p.a.setAppElement("#modal-portal");var k={overlay:{backgroundColor:"none"},content:{width:"15%",minWidth:"200px",borderRadius:"10px",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",zIndex:"1000",color:"rgba(0, 0, 0, 0.5)"}};var V=function(e){var t=e.isOpen,a=e.closeModal,o=e.contentLabel,s=Object(n.useState)(""),c=Object(r.a)(s,2),i=c[0],d=c[1],b=Object(n.useState)(""),h=Object(r.a)(b,2),O=h[0],v=h[1],f=Object(n.useState)(!1),g=Object(r.a)(f,2),y=g[0],x=g[1],N=Object(n.useState)(!1),S=Object(r.a)(N,2),V=S[0],w=S[1],T=Object(n.useState)(!1),P=Object(r.a)(T,2),R=P[0],M=P[1];if(R)return Object(u.jsx)(l.a,{to:{pathname:"/room",state:{roomcode:O,nickname:i}}});var L=function(){var e=Object(j.a)(m.a.mark((function e(t){var a,n,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),x(!0),""===i){e.next=22;break}return e.prev=3,e.next=6,fetch("".concat("https://bubbles-app-backend.herokuapp.com","/createroom"),{method:"POST"}).then((function(e){return e.json()}));case 6:return a=e.sent,n=a.message,o={roomcode:n,username:i},v(n),console.log(o),e.next=13,fetch("".concat("https://bubbles-app-backend.herokuapp.com","/joinroom"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});case 13:200===e.sent.status?C.connectWithPromise().then((function(e){console.log("Succesfully connected to Solace Cloud.",e),C.subscribe(n),M(!0)})).catch((function(e){console.log("Unable to establish connection with Solace Cloud, see above logs for more details.",e),w(!0)})):(w(!0),B()),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(3),console.log(e.t0),w(!0),B();case 22:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){d(""),x(!1)};return Object(u.jsxs)(p.a,{isOpen:t,onRequestClose:function(){B(),w(!1),a()},style:k,contentLabel:o,children:[Object(u.jsx)("p",{className:"modal-header",children:"nickname"}),Object(u.jsxs)("form",{className:"modal-form",onSubmit:L,children:[Object(u.jsx)("input",{className:"modal-name-input",type:"text",value:i,onChange:function(e){return d(e.target.value)},maxLength:15,disabled:y,style:{cursor:y?"not-allowed":"auto"}}),Object(u.jsx)("button",{className:"modal-submit-button",disabled:""===i||y,children:"join"})]}),Object(u.jsx)("p",{style:{marginBottom:0,color:"#f44",display:V?"block":"none"},children:"Our servers are having some issues at the moment..."})]})};a(136);p.a.setAppElement("#modal-portal");var w={overlay:{backgroundColor:"none"},content:{width:"15%",minWidth:"200px",borderRadius:"10px",padding:"30px",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",zIndex:"1000",color:"rgba(0, 0, 0, 0.5)"}};var T=function(e){var t=e.isOpen,a=e.closeModal,o=e.contentLabel,s=Object(n.useState)(""),c=Object(r.a)(s,2),i=c[0],d=c[1],b=Object(n.useState)(""),h=Object(r.a)(b,2),O=h[0],v=h[1],f=Object(n.useState)(!1),g=Object(r.a)(f,2),y=g[0],x=g[1],N=Object(n.useState)(!1),S=Object(r.a)(N,2),k=S[0],V=S[1],T=Object(n.useState)(!1),P=Object(r.a)(T,2),R=P[0],M=P[1];if(R)return Object(u.jsx)(l.a,{to:{pathname:"/room",state:{roomcode:i,nickname:O}}});var L=function(){var e=Object(j.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),x(!0),e.prev=2,a={roomcode:i,username:O},e.next=6,fetch("".concat("https://bubbles-app-backend.herokuapp.com","/joinroom"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 6:200===e.sent.status?C.connectWithPromise().then((function(e){console.log("Succesfully connected to Solace Cloud.",e),C.subscribe(i),M(!0)})).catch((function(e){console.log("Unable to establish connection with Solace Cloud, see above logs for more details.",e)})):(V(!0),B()),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),V(!0),B();case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){d(""),v(""),x(!1)};return Object(u.jsxs)(p.a,{isOpen:t,onRequestClose:function(){B(),V(!1),a()},style:w,contentLabel:o,children:[Object(u.jsxs)("form",{className:"modal-join-form",onSubmit:L,children:[Object(u.jsx)("p",{className:"modal-join-header",children:"bubble code"}),Object(u.jsx)("input",{className:"modal-join-code-input",type:"text",value:i,onChange:function(e){return d(e.target.value)},disabled:y,style:{cursor:y?"not-allowed":"auto"}}),Object(u.jsx)("p",{className:"modal-join-header",children:"nickname"}),Object(u.jsx)("input",{className:"modal-join-name-input",type:"text",value:O,onChange:function(e){return v(e.target.value)},maxLength:15,disabled:y,style:{cursor:y?"not-allowed":"auto"}}),Object(u.jsx)("button",{className:"modal-join-submit-button",disabled:""===O||""===i||y,children:"join"})]}),Object(u.jsx)("p",{style:{marginBottom:0,color:"#f44",display:!k||y?"none":"block"},children:"Please enter a valid room code."})]})},P=a.p+"static/media/logo.cead2453.svg";a(137);var R=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],o=t[1],s=Object(n.useState)(!1),c=Object(r.a)(s,2),i=c[0],l=c[1];return Object(n.useEffect)((function(){try{C.disconnect()}catch(e){console.log(e)}}),[]),Object(u.jsxs)("div",{className:"MainMenu",children:[Object(u.jsxs)("div",{style:{display:a||i?"none":"block"},children:[Object(u.jsxs)("div",{className:"logo-section",children:[Object(u.jsx)("h1",{className:"logo-text",children:"bubbles"}),Object(u.jsx)("img",{className:"logo-pic",src:P,alt:"logo"})]}),Object(u.jsxs)("div",{className:"menu-buttons",children:[Object(u.jsx)("p",{className:"menu-button",onClick:function(){return l(!0)},children:"start a bubble"}),Object(u.jsx)("p",{className:"menu-button",onClick:function(){return o(!0)},children:"join a bubble"})]})]}),Object(u.jsx)(V,{isOpen:i,closeModal:function(){return l(!1)},contentLabel:"Create A Bubble"}),Object(u.jsx)(T,{isOpen:a,closeModal:function(){return o(!1)},contentLabel:"Join A Bubble"})]})},M=a(103),L=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(O.a)(this,a),(n=t.call(this,e)).playNewVideo=n.playNewVideo.bind(Object(f.a)(n)),n.playVideo=n.playVideo.bind(Object(f.a)(n)),n.pauseVideo=n.pauseVideo.bind(Object(f.a)(n)),n.onPlayerReady=n.onPlayerReady.bind(Object(f.a)(n)),n.getStateName=n.getStateName.bind(Object(f.a)(n)),n.videoId="",n.state={player:null,videoOptions:{height:"100%",width:"100%"}},n}return Object(v.a)(a,[{key:"handleMessage",value:function(e){var t=JSON.parse(e.payloadString);if("playPressed"===t.messageType&&this.playVideo(),"pausePressed"===t.messageType&&this.pauseVideo(),"videoStateChange"===t.messageType){var a=t.eventCode,n=this.getStateName(a),o=t.videoTime,s=this.state.player.getCurrentTime();Math.abs(s-o)>1&&(this.state.player.seekTo(o),"playing"===n?this.playVideo():"paused"===n&&this.pauseVideo())}}},{key:"playNewVideo",value:function(e){this.videoId=e,this.state.player.loadVideoById(this.videoId,0)}},{key:"playVideo",value:function(e){this.state.player.playVideo()}},{key:"pauseVideo",value:function(e){this.state.player.pauseVideo()}},{key:"onPlayerReady",value:function(e){this.state.player=e.target,C.register(this.handleMessage.bind(this))}},{key:"onVideoPlay",value:function(e){var t=new S.a.Message(JSON.stringify({messageType:"playPressed",message:"Play press detected"}));t.destinationName=this.props.roomcode,C.send(t)}},{key:"onVideoPause",value:function(e){var t=new S.a.Message(JSON.stringify({messageType:"pausePressed",message:"Pause press detected"}));t.destinationName=this.props.roomcode,C.send(t)}},{key:"onVideoPlaybackRateChange",value:function(e){}},{key:"onVideoStateChange",value:function(e){var t=e.data,a=e.target.getCurrentTime();console.log("Video state ".concat(this.getStateName(t)," at: "),a);var n=new S.a.Message(JSON.stringify({messageType:"videoStateChange",eventCode:t,videoTime:a}));n.destinationName=this.props.roomcode,C.send(n)}},{key:"onVideoEnd",value:function(e){console.log("Video ended")}},{key:"onVideoError",value:function(e){console.log("Video error: ",e)}},{key:"getStateName",value:function(e){switch(e){case-1:return"unstarted";case 0:return"ended";case 1:return"playing";case 2:return"paused";case 3:return"buffering";case 5:return"video cued";default:return"invalid code"}}},{key:"render",value:function(){return Object(u.jsx)(M.a,{videoId:this.videoId,className:"Video",opts:this.state.videoOptions,onReady:this.onPlayerReady.bind(this),onPlay:this.onVideoPlay.bind(this),onPause:this.onVideoPause.bind(this),onPlaybackRateChange:this.onVideoPlaybackRateChange.bind(this),onStateChange:this.onVideoStateChange.bind(this),onEnd:this.onVideoEnd.bind(this)})}}]),a}(n.Component),B=a(46);a(149);p.a.setAppElement("#modal-portal");var I={overlay:{backgroundColor:"none"},content:{width:"15%",minWidth:"200px",borderRadius:"10px",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",zIndex:"1000",color:"rgba(0, 0, 0, 0.5)"}};var J=function(e){var t=e.isOpen,a=e.closeModal,o=e.contentLabel,s=e.queueVideo,c=e.roomcode;Object(n.useEffect)((function(){C.register(r)}),[]);var r=function(e){try{var t=JSON.parse(e.payloadString);if("newVideoURL"===t.messageType){var a=new URL(t.url);s(a.searchParams.get("v"))}}catch(n){console.log(n)}};return Object(u.jsxs)(p.a,{isOpen:t,onRequestClose:a,style:I,contentLabel:o,children:[Object(u.jsx)("p",{className:"modal-play-header",children:"youtube video url"}),Object(u.jsxs)("form",{className:"modal-play-form",onSubmit:function(e){e.preventDefault();try{var t=new URL(document.getElementById("youtube-link-input").value);s(t.searchParams.get("v"));var n=new S.a.Message(JSON.stringify({messageType:"newVideoURL",url:t}));n.destinationName=c,C.send(n)}catch(o){console.log(o)}a()},children:[Object(u.jsx)("input",{id:"youtube-link-input",className:"modal-play-input",type:"text"}),Object(u.jsx)("button",{className:"modal-play-submit-button",children:"play"})]})]})};var E=function(e){var t=e.label,a=e.className,n=e.onClick;return Object(u.jsx)("p",{className:a,onClick:n,children:t})};a(150);var A=function(e){var t=e.list,a=Object(n.useState)(!0),o=Object(r.a)(a,2),s=o[0],c=o[1];return Object(u.jsxs)("div",{className:"SideBarList",children:[Object(u.jsx)(E,{className:"SideBarList-Toggle",label:"members",onClick:function(){return c(!s)}}),Object(u.jsx)("div",{style:{display:s?"block":"none"},className:"SideBarList-Items",children:t.map((function(e,t){return Object(u.jsx)("p",{children:e},t)}))})]})};a(151);var q=function(e){var t=e.roomcode,a=e.username,o=Object(n.useState)(""),s=Object(r.a)(o,2),c=s[0],i=s[1],l=Object(n.useState)([]),d=Object(r.a)(l,2),b=d[0],m=d[1],j=Object(n.useRef)();Object(n.useEffect)((function(){C.register(h)}),[]);var h=function(e){try{var t=JSON.parse(e.payloadString);if("newTextMessage"===t.messageType){var a={username:t.username,text:t.text};m((function(e){return[].concat(Object(B.a)(e),[a])}))}}catch(n){console.log(n)}p()},p=function(){j.current.scrollIntoView({behavior:"smooth"})};return Object(u.jsxs)("div",{className:"SideBarChat",children:[Object(u.jsxs)("div",{className:"SideBarChat-Items",children:[b.map((function(e,t){var a=e.username,n=e.text;return Object(u.jsxs)("p",{className:"SideBarChat-Item",children:[a,": ",n]},t)})),Object(u.jsx)("div",{ref:j,className:"SideBarChat-anchor"})]}),Object(u.jsx)("form",{className:"SideBarChat-Form",onSubmit:function(e){if(e.preventDefault(),""!==c){var n=new S.a.Message(JSON.stringify({messageType:"newTextMessage",username:a,text:c}));n.destinationName=t,C.send(n),i("")}},children:Object(u.jsx)("input",{type:"text",value:c,onChange:function(e){return i(e.target.value)}})})]})},U=a(42),W=a(43);a(154);var D=function(e){var t=e.roomcode,a=e.username,o=e.queueVideo,s=Object(n.useState)(!1),c=Object(r.a)(s,2),i=c[0],l=c[1],d=Object(n.useState)([]),b=Object(r.a)(d,2),m=b[0],j=b[1];Object(n.useEffect)((function(){C.register(h),fetch("".concat("https://bubbles-app-backend.herokuapp.com","/getUsers"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomcode:t})}).then((function(e){return e.json()})).then((function(e){return j(e.users)})).catch((function(e){return console.log(e)}))}),[]);var h=function(e){try{var t=JSON.parse(e.payloadString);"userJoined"===t.messageType&&j((function(e){return[].concat(Object(B.a)(e),[t.username])}))}catch(a){console.log(a)}};return Object(u.jsxs)("div",{className:"SideBar",children:[Object(u.jsxs)("div",{className:"SideBar-Top",children:[Object(u.jsx)(E,{label:t,className:"RoomCodeLabel"}),Object(u.jsx)(A,{list:m,roomcode:t}),Object(u.jsx)(q,{roomcode:t,username:a})]}),Object(u.jsx)("div",{className:"SideBar-Buttons",children:Object(u.jsxs)("button",{className:"play-button",onClick:function(){return l(!0)},children:[Object(u.jsx)(U.a,{icon:W.b,style:{marginRight:"10px"}}),"play"]})}),Object(u.jsx)(J,{isOpen:i,closeModal:function(){return l(!1)},contentLabel:"Play Video",queueVideo:o,roomcode:t})]})};a(155);var z=function(e){if(!e.location.state)return Object(u.jsx)(l.a,{to:"/"});var t=e.location.state,a=t.roomcode,n=t.nickname,o=new L({roomcode:a});return Object(u.jsxs)("div",{className:"RoomScreen",children:[Object(u.jsx)(D,{roomcode:a,queueVideo:o.playNewVideo,username:n}),Object(u.jsx)("div",{className:"VideoSection",children:o.render()})]})},F=a(110);a(262);var G=function(e){var t=e.themeColor,a=e.setThemeColor,o=Object(n.useState)(!1),s=Object(r.a)(o,2),c=s[0],i=s[1],l=Object(n.useState)(t),d=Object(r.a)(l,2),b=d[0],m=d[1];return Object(u.jsxs)("div",{className:"ThemeChanger",children:[Object(u.jsx)(U.a,{icon:W.a,className:"ThemeChanger-Icon",onClick:function(){return i(!c)}}),c?Object(u.jsxs)("div",{className:"ThemeChanger-Popover",children:[Object(u.jsx)("div",{className:"ThemeChanger-Cover",onClick:function(){return i(!1)}}),Object(u.jsx)(F.a,{className:"ThemeChanger-ColorPicker",onChange:function(e){var t=e.hex;m(t),a(t)},color:b,disableAlpha:!0})]}):null]})};a(263);var H=function(){var e=Object(n.useState)("#413c77"),t=Object(r.a)(e,2),a=t[0],o=t[1],s=Object(n.useState)("77"),c=Object(r.a)(s,2),b=c[0];return c[1],Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(d,{themeColor:a,themeTransparency:b}),Object(u.jsx)(G,{themeColor:a,setThemeColor:o}),Object(u.jsx)(i.a,{basename:"/",children:Object(u.jsxs)(l.d,{children:[Object(u.jsx)(l.b,{path:"/",exact:!0,component:R}),Object(u.jsx)(l.b,{path:"/room",exact:!0,component:z})]})})]})};c.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(H,{})}),document.getElementById("root"))}},[[264,1,2]]]);
//# sourceMappingURL=main.3f72a680.chunk.js.map